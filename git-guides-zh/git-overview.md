# Git 指南

关于 Git 的一切，从入门到高级命令和工作流程。

**快速链接：**
- [什么是 Git？](#什么是-git)
- [Git 是用什么语言编写的？](#git-是用什么语言编写的)
- [为什么要使用 Git？](#为什么要使用-git)
    - [速度](#速度)
    - [合并冲突](#合并冲突)
    - [轻量级分支](#轻量级分支)
    - [轻松回滚](#轻松回滚)
- [如何使用 Git？](#如何使用-git)
    - [学习 Git 基础知识](#学习-git-基础知识) 
    - [开始使用 Git 工作流程](#开始使用-git-工作流程)
        - [创建分支](#创建分支) 
        - [进行更改（并提交）](#进行更改并提交)
        - [将更改推送到远程仓库](#将更改推送到远程仓库)
        - [创建拉取请求](#创建拉取请求)
        - [协作](#协作)
        - [合并到主分支](#合并到主分支)
    - [开始使用 GitHub](#开始使用-github)

## 什么是 Git？

Git 是一个分布式版本控制软件。版本控制是一种保存更改的方式，而不会覆盖之前的版本。分布式意味着每个使用 Git 仓库的开发人员都拥有该仓库的完整副本 - 包括每个提交、每个分支、每个文件。如果你习惯使用集中式版本控制系统，这是一个很大的不同！

无论你之前是否使用过版本控制，在开始使用 Git 之前，你应该了解以下几点：

- 分支是轻量级的，所以可以创建很多分支
- Git 使用 SHA 哈希存储更改，通过压缩文本文件来实现。这使得 Git 成为软件编程的非常好的版本控制系统（VCS），但对于二进制文件（如图像或视频）则不太适合
- Git 仓库可以相互连接，所以你可以在本地机器上工作，并将其连接到共享仓库。这样，你可以[推送](/git-guides/git-push)和[拉取](/git-guides/git-pull)更改到仓库，轻松与他人协作

## Git 是用什么语言编写的？

Git 核心工具是用 C、Shell、Perl 和 Tcl 编写的。你可以在 GitHub 上的 [git/git](https://github.com/git/git) 找到 Git 的源代码。

## 为什么要使用 Git？

版本控制非常重要 - 没有它，你可能会丢失工作。使用 Git，你可以随时创建"提交"或保存点。你还可以回到之前的提交。这减轻了你工作时的压力。经常提交，尽早提交，你就永远不会因为覆盖或丢失更改而感到沮丧。

有很多版本控制系统 - 但 Git 有一些主要优势。

### 速度

如上所述，Git 使用 SHA 压缩，这使其非常快速。

### 合并冲突

Git 可以处理合并冲突，这意味着**允许多个人同时处理同一个文件**。这以一种集中式版本控制不可能的方式打开了开发世界。你可以访问整个项目，如果你在分支上工作，你可以做任何需要的事情，并知道你的更改是安全的。

### 轻量级分支

说到分支，Git 提供了很多灵活性和协作机会。**通过使用分支，开发人员可以在安全的沙盒中进行更改。**

开发人员不仅可以提交 100% 确定会成功的代码，还可以提交可能需要帮助的代码。然后，他们可以将该代码推送到远程，并从集成测试或同行评审中获得快速反馈。

如果不通过分支共享代码，这将永远不可能。

### 轻松回滚

如果你犯了错误，没关系！提交是不可变的，意味着它们不能被更改。（*注意：你可以更改历史记录，但它会创建新的替换提交，而不是编辑现有提交。稍后会详细介绍！*）这意味着如果你确实犯了错误，即使在重要分支（如 `main`）上，也没关系。**你可以轻松地撤销该更改，或将分支指针回滚到一切正常的提交。**

这的好处怎么强调都不为过。它不仅为项目和代码创建了更安全的环境，而且培养了一个开发环境，让开发人员可以更大胆，相信 Git 会支持他们。

## 如何使用 Git？

### 学习 Git 基础知识

如果你刚开始使用 Git，学习基本命令的好地方是 [Git 备忘单](https://github.github.io/training-kit/)。它被翻译成多种语言，[作为 `github/training-kit` 仓库的一部分开源](https://github.com/github/training-kit)，是学习命令行基础知识的绝佳起点。

你会在那里找到一些最重要和最常用的命令：

- `git clone [url]`：[克隆](/git-guides/git-clone)（下载）GitHub 上已存在的仓库，包括所有文件、分支和提交
- `git status`：总是个好主意，这个命令显示你在哪个分支上，工作区或暂存区中有哪些文件，以及其他重要信息
- `git branch`：显示本地仓库中的现有分支。你也可以使用 `git branch [branch-name]` 从当前位置创建分支，或使用 `git branch --all` 查看所有分支，包括本地机器上的分支和从远程获取的远程跟踪分支
- `git checkout [branch-name]`：切换到指定分支并更新工作目录
- `git add [file]`：为版本控制准备文件快照，将其添加到暂存区
- `git commit -m "描述性消息"`：在版本历史中永久记录文件快照
- `git pull`：使用 GitHub 上相应远程分支的所有新提交更新当前本地工作分支。`git pull` 是 `git fetch` 和 `git merge` 的组合
- `git push`：将所有本地分支提交上传到远程
- `git log`：浏览和检查项目文件的演变
- `git remote -v`：显示关联的远程仓库及其存储的名称，如 `origin`

如果你正在寻找更多 GitHub 特定的技术指导，请查看 [GitHub 帮助文档](https://help.github.com/) 或我们在 YouTube 上的 [GitHub for Developers 系列](https://www.youtube.com/watch?v=H6wTAIlOUBQ&list=PLg7s6cbtAD16Pgp6WIVfX4VsGI-xyWkMz)。

### 开始使用 Git 工作流程

根据你的操作系统，你可能已经[安装了 Git](/git-guides/install-git)。但是，开始使用意味着不仅仅是拥有软件！要开始使用，了解 Git 的基本工作原理很重要。你可以选择在终端、GitHub Desktop 等应用程序或通过 GitHub.com 进行实际工作。（*注意：虽然你可以通过 GitHub.com 与 Git 交互，但你的体验可能会受到限制。许多本地工具可以让你访问最广泛使用的 Git 功能，尽管只有终端才能让你访问所有功能。*）

使用 Git 的方法有很多，这不一定使它更容易！但是，基本的 Git 工作流程有几个主要步骤。你可以在 [GitHub Learning Lab 课程](https://lab.github.com/githubtraining/introduction-to-github) 中练习所有这些内容。

#### 创建分支

主分支通常称为 `main`。我们想在另一个分支上工作，这样我们可以安全地创建拉取请求和进行更改。首先，从 `main` 创建一个分支。你可以随意命名 - 但我们建议根据这个分支将关注的功能或特性来命名分支。一个人可能有多个分支，一个分支可能有多个人在上面协作 - 分支是为了目的，而不是为了人。无论你当前"在"哪里（无论 HEAD 指向哪里，或者你当前"检出"到哪个分支），都将是你要创建的分支的父分支。这意味着你可以从其他分支、标签或任何提交创建分支！但是，最典型的工作流程是从 `main` 创建分支 - 它代表最新的生产代码。

#### 进行更改（并提交）

一旦你创建了分支，并通过"检出"到该分支移动了 HEAD 指针，你就可以开始工作了。使用你喜欢的文本编辑器或 IDE 在仓库中进行更改。

接下来，保存你的更改。你准备好开始提交了！

要开始你的[提交](/git-guides/git-commit)，你需要使用 `git add [file]` 让 Git 知道你想要包含哪些更改。

一旦你保存并暂存了更改，你就可以使用 `git commit -m "描述性提交消息"` [进行提交](/git-guides/git-commit)。

#### 将更改推送到远程仓库

到目前为止，如果你在本地进行了提交，只有你能看到它。为了让其他人看到你的工作并开始协作，你应该使用 `git push` "推送"你的更改。如果你第一次推送在本地创建的分支，你可能需要给 Git 一些更多信息。`git push -u origin [branch-name]` 告诉 Git 推送当前分支，并在远程创建一个具有相同名称的分支 - 同时，创建与该分支的关系，以便将来 `git push` 就足够了。

默认情况下，`git push` 只推送你当前检出的分支。

有时，如果远程分支上有新的提交，你可能会被阻止推送。别担心！从简单的 [`git pull`](/git-guides/git-pull) 开始，将远程的更改合并到你的本地分支中，解决任何冲突或完成从远程到本地分支的合并，然后再次尝试推送。

#### 创建拉取请求

如果拉取请求已经存在，推送分支或新提交到远程仓库就足够了，但如果是第一次推送该分支，你应该创建一个新的拉取请求。拉取请求是两个分支的比较 - 通常是 `main`，或创建特性分支的分支，和特性分支。这样，就像分支一样，拉取请求围绕特定的功能或工作添加，而不是进行更改的人或更改所需的时间。

拉取请求是 GitHub 的强大功能。集成测试可以自动在拉取请求上运行，为你提供代码的即时反馈。同行可以进行详细的代码审查，让你知道是否需要更改，或者是否准备就绪。

确保你以正确的信息开始你的拉取请求。站在队友的角度，甚至是未来的自己的角度。包含有关此更改涉及什么、是什么促使它、已经完成了什么、还有什么要做，以及任何特定的帮助或审查请求的信息。包含相关工作或对话的链接。拉取请求模板可以通过自动化拉取请求正文的起始内容来使这个过程变得容易。

#### 协作

一旦拉取请求打开，真正的乐趣就开始了。重要的是要认识到拉取请求不是在工作完成时打开的。拉取请求应该在工作开始时打开！你越早打开拉取请求，整个团队就越能看到你正在做的工作。当你准备好获得反馈时，你可以通过集成测试或请求队友的审查来获得反馈。

你很可能会想要对你的工作做更多更改。这很好！要做到这一点，在同一个分支上做更多提交。一旦新提交出现在远程，拉取请求就会更新并显示你工作的最新版本。

#### 合并到 `main`

一旦你和你的团队认为拉取请求看起来不错，你就可以合并它。通过合并，你将特性分支集成到另一个分支（最常见的是 `main` 分支）。然后，`main` 将使用你的更改进行更新，你的拉取请求将被关闭。别忘了删除你的分支！你不再需要它了。记住，分支是轻量级的，当你需要时，你应该基于 `main` 分支上的最新提交创建一个新的分支。

如果你选择不合并拉取请求，你也可以关闭带有未合并更改的拉取请求。

### 开始使用 GitHub

如果你想知道 Git 在哪里结束，GitHub 在哪里开始，你并不孤单。它们紧密相连，使与它们一起工作成为一种无缝体验。虽然 Git 负责底层版本控制，但 GitHub 是构建在其之上的协作平台。GitHub 是拉取请求、评论、审查、集成测试等的地方。大多数开发人员都在本地进行开发，并使用 GitHub 进行协作。这包括使用 GitHub 托管共享远程仓库，与同事合作，以及利用受保护分支、代码审查、GitHub Actions 等功能。

练习使用 Git 和 GitHub 的最佳地点是 [GitHub Learning Lab 课程](https://lab.github.com/githubtraining/introduction-to-github)。

如果你已经了解 Git 并需要注册 GitHub 账户，请前往 [github.com](https://github.com/)。 