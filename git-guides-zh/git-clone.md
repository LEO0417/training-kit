# Git Clone

`git clone` 命令用于创建特定仓库或仓库内分支的副本。

Git 是一个分布式版本控制系统。通过克隆，最大化利用你机器上完整仓库的优势。

## `git clone` 的作用是什么？

```sh
git clone https://github.com/github/training-kit.git
```

当你克隆一个仓库时，你不会像在其他集中式版本控制系统中那样只得到一个文件。通过使用 Git 克隆，你获得整个仓库 - 所有文件、所有分支和所有提交。

克隆仓库通常只在项目交互开始时进行一次。一旦仓库已经存在于远程（如 GitHub），那么你将克隆该仓库，以便你可以在本地与之交互。一旦你克隆了仓库，你就不需要再次克隆它来进行常规开发。

能够处理整个仓库意味着所有开发人员可以更自由地工作。不受你可以处理哪些文件的限制，你可以在特性分支上安全地进行更改。然后，你可以：
- 稍后使用 `git push` 与远程仓库共享你的分支
- 打开拉取请求以与协作者比较更改
- 根据需要从分支进行测试和部署
- 合并到 `main` 分支。

## 如何使用 `git clone`

### `git clone` 的常见用法和选项

* `git clone [url]`：克隆（下载）GitHub 上已存在的仓库，包括所有文件、分支和提交。
* `git clone --mirror`：克隆仓库但没有编辑任何文件的能力。这包括引用或分支。如果你尝试在单独的远程上创建仓库的次要副本，并且你想要匹配所有分支，你可能想使用这个。这可能发生在使用新的远程进行 Git 托管配置时，或在自动化测试期间使用 Git 时。
* `git clone --single-branch`：只克隆单个分支
* `git clone --sparse`：不是递归地用当前提交中的所有文件填充工作目录，而是只填充根目录中存在的文件。当克隆具有许多目录和子目录的大型仓库时，这可能有助于提高性能。
* `git clone --recurse-submodules[=<pathspec]`：创建克隆后，根据提供的 pathspec（如果未提供 pathspec，则为所有子模块）初始化和克隆子模块。如果你正在克隆一个你知道有子模块的仓库，并且你将在本地开发中将这些子模块作为依赖项使用，这可能是一个不错的选择。

你可以在 [git-scm 的文档](https://git-scm.com/docs/git-clone) 中查看 `git clone` 的所有选项。

## `git clone` 的示例

### `git clone [url]`

克隆的最常见用法是简单地克隆一个仓库。这只在开始处理项目时进行一次，并且将遵循 `git clone [url]` 的语法。

### 克隆分支

`git clone --single-branch`：默认情况下，`git clone` 将为当前存在于被克隆的远程中的所有分支创建远程跟踪分支。创建的唯一本地分支是默认分支。

但是，也许出于某种原因，你只想为一个特定分支获取远程跟踪分支，或者克隆一个不是默认分支的分支。当你使用 `--single-branch` 与 `git clone` 时，这两种情况都会发生。

这将创建一个只包含当前历史线中的提交的克隆。这意味着不会克隆其他分支。你可以指定要克隆的特定分支，但默认情况下会选择默认分支，通常是 `main`。

要克隆一个特定分支，使用：

`git clone [url] --branch [分支] --single-branch`

_只克隆一个分支不会带来任何好处，除非仓库非常大并且包含会降低仓库性能的二进制文件。推荐的解决方案是在依赖单分支克隆策略之前优化仓库的性能。_

### 使用 SSH 克隆

根据你如何与远程服务器进行身份验证，你可以选择使用 SSH 克隆。

如果你选择使用 SSH 克隆，你将使用仓库的特定 SSH 路径而不是 URL。通常，开发人员是在机器级别通过 SSH 进行身份验证的。这意味着你可能使用 HTTPS 或 SSH 克隆 - 而不是混合使用两者来克隆你的仓库。

## 相关术语

- `git branch`：这显示本地仓库中现有的分支。你也可以使用 `git branch [分支名]` 从当前位置创建分支，或 `git branch --all` 查看所有分支，包括本地机器上的分支和从上次 `git pull` 或 `git fetch` 远程存储的远程跟踪分支。
- `git pull`：使用 GitHub 上相应远程分支的所有新提交更新当前本地工作分支。`git pull` 是 `git fetch` 和 `git merge` 的组合。
- `git push`：将所有本地分支提交上传到远程。
- `git remote -v`：显示关联的远程仓库及其存储的名称，如 `origin`。 